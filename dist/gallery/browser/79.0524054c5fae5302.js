"use strict";(self.webpackChunkgallery=self.webpackChunkgallery||[]).push([[79],{2079:(O,u,r)=>{r.d(u,{F:()=>B,Q:()=>P});var e=r(4893),d=r(520),s=r(9808);function _(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"div",15),e.NdJ("drop",function(i){return e.CHM(t),e.oxw(2).drop(i)})("dragover",function(i){return e.CHM(t),e.oxw(2).allowDrop(i)}),e.TgZ(3,"p",16),e._uU(4),e.qZA()()()()}if(2&l){const t=e.oxw(2);e.Q6J("ngClass",t.hideSelectBtn&&t.hideResetBtn?null:"dragNDropBtmPad"),e.xp6(4),e.Oqu(null==t.replaceTexts?null:t.replaceTexts.dragNDropBox)}}function f(l,o){if(1&l&&(e.TgZ(0,"label",17),e._uU(1),e.qZA()),2&l){const t=e.oxw(2);e.MGl("for","sel",t.id,""),e.Q6J("ngClass",t.progressBarShow?"disabled":null),e.xp6(1),e.Oqu(null==t.replaceTexts?null:t.replaceTexts.selectFileBtn)}}function g(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"input",18),e.NdJ("change",function(i){return e.CHM(t),e.oxw(2).onChange(i)}),e.qZA()}if(2&l){const t=e.oxw(2);e.MGl("id","sel",t.id,""),e.Q6J("disabled",t.progressBarShow)("accept",t.formatsAllowed),e.uIk("multiple",t.multiple?"":null)}}function h(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).resetFileUpload()}),e._uU(1),e.qZA()}if(2&l){const t=e.oxw(2);e.Q6J("disabled",t.progressBarShow),e.xp6(1),e.Oqu(null==t.replaceTexts?null:t.replaceTexts.resetBtn)}}function x(l,o){1&l&&e._UZ(0,"br")}const p=function(l){return{width:l}};function m(l,o){if(1&l&&(e.TgZ(0,"div",26)(1,"span",27),e._uU(2),e.qZA()()),2&l){const t=e.oxw(3);e.xp6(1),e.Q6J("ngStyle",e.VKq(2,p,t.uploadPercent+"%")),e.xp6(1),e.hij("",t.uploadPercent,"%")}}function A(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index;return e.oxw(2).removeFile(i,"sf")}),e._UZ(1,"i",29),e.qZA()}}function U(l,o){if(1&l&&(e.TgZ(0,"div",20)(1,"p",21)(2,"span",22),e._uU(3),e.qZA()(),e.TgZ(4,"p",23)(5,"strong"),e._uU(6),e.qZA(),e._uU(7,"\xa0\xa0\xa0\xa0\xa0"),e.qZA(),e.YNc(8,m,3,4,"div",24),e.YNc(9,A,2,0,"a",25),e.qZA()),2&l){const t=o.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(3),e.hij("(",n.convertSize(t.size),")"),e.xp6(2),e.Q6J("ngIf",n.isAllowedFileSingle&&n.progressBarShow&&!n.hideProgressBar),e.xp6(1),e.Q6J("ngIf",!n.uploadStarted)}}function b(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"a",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index;return e.oxw(2).removeFile(i,"na")}),e._uU(1,"\xa0"),e._UZ(2,"i",29),e.qZA()}}function F(l,o){if(1&l&&(e.TgZ(0,"div",30)(1,"p",21)(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"p",23)(5,"strong"),e._uU(6),e.qZA()(),e.TgZ(7,"p",31),e._uU(8),e.qZA(),e.YNc(9,b,3,0,"a",32),e.qZA()),2&l){const t=o.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.fileName),e.xp6(3),e.hij("(",t.fileSize,")"),e.xp6(2),e.Oqu(t.errorMsg),e.xp6(1),e.Q6J("ngIf",!n.uploadStarted)}}function w(l,o){if(1&l&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&l){const t=e.oxw(2);e.Gre("",t.uploadMsgClass," + afu-upload-status"),e.xp6(1),e.hij("",t.uploadMsgText," ")}}function C(l,o){if(1&l&&(e.TgZ(0,"div")(1,"div",34)(2,"span",27),e._uU(3),e.qZA()(),e._UZ(4,"br")(5,"br"),e.qZA()),2&l){const t=e.oxw(2);e.xp6(2),e.Q6J("ngStyle",e.VKq(2,p,t.uploadPercent+"%")),e.xp6(1),e.hij("",t.uploadPercent,"%")}}function T(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).uploadFiles()}),e._uU(1),e.qZA()}if(2&l){const t=e.oxw(2);e.Q6J("disabled",!t.enableUploadBtn&&t.progressBarShow),e.xp6(1),e.Oqu(null==t.replaceTexts?null:t.replaceTexts.uploadBtn)}}function v(l,o){if(1&l&&(e.TgZ(0,"div",2),e.YNc(1,_,5,2,"div",3),e.YNc(2,f,2,3,"label",4),e.YNc(3,g,1,4,"input",5),e.YNc(4,h,2,2,"button",6),e.YNc(5,x,1,0,"br",7),e.TgZ(6,"p",8),e._uU(7),e.qZA(),e.YNc(8,U,10,4,"div",9),e.YNc(9,F,10,4,"div",10),e.YNc(10,w,2,4,"p",11),e._UZ(11,"p"),e.YNc(12,C,6,4,"div",7),e.YNc(13,T,2,2,"button",12),e._UZ(14,"br"),e.qZA()),2&l){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","dragNDrop"==t.theme),e.xp6(1),e.Q6J("ngIf",!t.hideSelectBtn),e.xp6(1),e.Q6J("ngIf",!t.hideSelectBtn),e.xp6(1),e.Q6J("ngIf",!t.hideResetBtn),e.xp6(1),e.Q6J("ngIf",!t.hideSelectBtn),e.xp6(2),e.lnq("",t.formatsAllowedText," ",null==t.replaceTexts?null:t.replaceTexts.sizeLimit,": ",t.convertSize(t.maxSize)," "),e.xp6(1),e.Q6J("ngForOf",t.allowedFiles),e.xp6(1),e.Q6J("ngForOf",t.notAllowedFiles),e.xp6(1),e.Q6J("ngIf",t.uploadMsg),e.xp6(2),e.Q6J("ngIf",!t.isAllowedFileSingle&&t.progressBarShow&&!t.hideProgressBar),e.xp6(1),e.Q6J("ngIf",!t.autoUpload)}}function M(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",36)(1,"div",37)(2,"a",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().attachpinOnclick()}),e._uU(3),e._UZ(4,"i",39),e.TgZ(5,"input",40),e.NdJ("change",function(i){return e.CHM(t),e.oxw().onChange(i)}),e.qZA(),e._UZ(6,"br"),e.qZA(),e._uU(7," \xa0 "),e.TgZ(8,"span",41),e._uU(9),e.qZA()()()}if(2&l){const t=e.oxw();e.xp6(3),e.hij(" ",null==t.replaceTexts?null:t.replaceTexts.attachPinBtn," "),e.xp6(2),e.MGl("id","sel",t.id,""),e.Q6J("accept",t.formatsAllowed),e.uIk("multiple",t.multiple?"":null),e.xp6(3),e.MGl("id","upload-file-info",t.id,""),e.xp6(1),e.Oqu(null==t.allowedFiles[0]?null:t.allowedFiles[0].name)}}let P=(()=>{class l{constructor(t){this.http=t,this.resetUpload=!1,this.ApiResponse=new e.vpe,this.fileSelected=new e.vpe,this.allowedFiles=[],this.notAllowedFiles=[],this.Caption=[],this.isAllowedFileSingle=!0,this.progressBarShow=!1,this.enableUploadBtn=!1,this.uploadMsg=!1,this.afterUpload=!1,this.uploadStarted=!1,this.currentUploads=[],this.fileNameIndex=!0,this.withCredentials=!1,this.autoUpload=!1,this.idDate=+new Date}ngOnChanges(t){t.config&&this.config&&(this.theme=this.config.theme||"",this.id=this.config.id||parseInt((this.idDate/1e4).toString().split(".")[1],10)+1e4*Math.floor(20*Math.random()),this.hideProgressBar=this.config.hideProgressBar||!1,this.hideResetBtn=this.config.hideResetBtn||!1,this.hideSelectBtn=this.config.hideSelectBtn||!1,this.maxSize=1024e3*(this.config.maxSize||20),this.uploadAPI=this.config.uploadAPI.url,this.method=this.config.uploadAPI.method||"POST",this.formatsAllowed=this.config.formatsAllowed||"*",this.formatsAllowedText="*"===this.formatsAllowed?"":"("+this.formatsAllowed+")",this.multiple=this.config.multiple||!1,this.headers=this.config.uploadAPI.headers||{},this.params=this.config.uploadAPI.params||{},this.responseType=this.config.uploadAPI.responseType||"json",this.withCredentials=this.config.uploadAPI.withCredentials||!1,this.fileNameIndex=!1!==this.config.fileNameIndex,this.autoUpload=this.config.autoUpload||!1,this.replaceTexts={selectFileBtn:this.multiple?"Select Files":"Select File",resetBtn:"Reset",uploadBtn:"Upload",dragNDropBox:"Drag N Drop",attachPinBtn:this.multiple?"Attach Files...":"Attach File...",afterUploadMsg_success:"Successfully Uploaded !",afterUploadMsg_error:"Upload Failed !",sizeLimit:"Size Limit"},this.config.replaceTexts&&(this.replaceTexts=Object.assign(Object.assign({},this.replaceTexts),this.config.replaceTexts))),t.resetUpload&&!0===t.resetUpload.currentValue&&this.resetFileUpload()}resetFileUpload(){this.allowedFiles=[],this.Caption=[],this.notAllowedFiles=[],this.uploadMsg=!1,this.enableUploadBtn=!1}onChange(t){this.fileSelected.emit(t),this.notAllowedFiles=[];const n=/(?:\.([^.]+))?$/;let i;(this.afterUpload||!this.multiple)&&(this.allowedFiles=[],this.Caption=[],this.afterUpload=!1),i="drop"===t.type?t.dataTransfer.files:t.target.files||t.srcElement.files;for(let a=0;a<i.length;a++){const Z=n.exec(i[a].name)[1].toLowerCase(),c=!!this.formatsAllowed.includes("*")||this.formatsAllowed.includes(Z),I=i[a].size<=this.maxSize;c&&I?this.allowedFiles.push(i[a]):this.notAllowedFiles.push({fileName:i[a].name,fileSize:this.convertSize(i[a].size),errorMsg:c?"Invalid size":"Invalid format"})}this.allowedFiles.length>0?(this.enableUploadBtn=!0,("attachPin"===this.theme||this.autoUpload)&&this.uploadFiles()):this.enableUploadBtn=!1,this.uploadMsg=!1,this.uploadStarted=!1,this.uploadPercent=0,t.target.value=null}uploadFiles(){this.progressBarShow=!0,this.uploadStarted=!0,this.notAllowedFiles=[];let t=!1;this.isAllowedFileSingle=this.allowedFiles.length<=1;const n=new FormData;this.allowedFiles.forEach((i,a)=>{n.append(this.Caption[a]||"file"+(this.fileNameIndex?a:""),this.allowedFiles[a])}),this.http.request(this.method.toUpperCase(),this.uploadAPI,{body:n,reportProgress:!0,observe:"events",headers:this.headers,params:this.params,responseType:this.responseType,withCredentials:this.withCredentials}).subscribe(i=>{i.type===d.dt.UploadProgress?(this.enableUploadBtn=!1,this.uploadPercent=Math.round(i.loaded/i.total*100)):i.type===d.dt.Response&&(200===i.status||201===i.status?(this.progressBarShow=!1,this.enableUploadBtn=!1,this.uploadMsg=!0,this.afterUpload=!0,t||(this.uploadMsgText=this.replaceTexts.afterUploadMsg_success,this.uploadMsgClass="text-success lead")):(t=!0,this.handleErrors()),this.ApiResponse.emit(i))},i=>{t=!0,this.handleErrors(),this.ApiResponse.emit(i)})}handleErrors(){this.progressBarShow=!1,this.enableUploadBtn=!1,this.uploadMsg=!0,this.afterUpload=!0,this.uploadMsgText=this.replaceTexts.afterUploadMsg_error,this.uploadMsgClass="text-danger lead"}removeFile(t,n){"sf"===n?(this.allowedFiles.splice(t,1),this.Caption.splice(t,1)):this.notAllowedFiles.splice(t,1),0===this.allowedFiles.length&&(this.enableUploadBtn=!1)}convertSize(t){return t<1024e3?(t/1024).toFixed(2)+" KB":(t/1024e3).toFixed(2)+" MB"}attachpinOnclick(){const t=document.getElementById("sel"+this.id);null!==t&&t.click()}drop(t){t.stopPropagation(),t.preventDefault(),this.onChange(t)}allowDrop(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(d.eN,4))},l.\u0275cmp=e.Xpm({type:l,selectors:[["angular-file-uploader"]],inputs:{resetUpload:"resetUpload",config:"config"},outputs:{ApiResponse:"ApiResponse",fileSelected:"fileSelected"},features:[e.TTD],decls:2,vars:2,consts:[["class","container","id","default",4,"ngIf"],["id","attachPin",4,"ngIf"],["id","default",1,"container"],["id","dragNDrop","class","dragNDrop",3,"ngClass",4,"ngIf"],["class","btn btn-primary btn-sm afu-select-btn",3,"for","ngClass",4,"ngIf"],["type","file","style","display: none","title","Select file","name","files[]",3,"id","disabled","accept","change",4,"ngIf"],["class","btn btn-info btn-sm resetBtn afu-reset-btn",3,"disabled","click",4,"ngIf"],[4,"ngIf"],[1,"constraints-info","afu-constraints-info"],["class","row afu-valid-file",4,"ngFor","ngForOf"],["class","row text-danger afu-invalid-file",4,"ngFor","ngForOf"],[3,"class",4,"ngIf"],["class","btn btn-success afu-upload-btn","type","button",3,"disabled","click",4,"ngIf"],["id","dragNDrop",1,"dragNDrop",3,"ngClass"],[2,"position","relative"],["id","div1",1,"div1","afu-dragndrop-box",3,"drop","dragover"],[1,"afu-dragndrop-text"],[1,"btn","btn-primary","btn-sm","afu-select-btn",3,"for","ngClass"],["type","file","title","Select file","name","files[]",2,"display","none",3,"id","disabled","accept","change"],[1,"btn","btn-info","btn-sm","resetBtn","afu-reset-btn",3,"disabled","click"],[1,"row","afu-valid-file"],[1,"col-xs-3","textOverflow"],[1,"text-primary"],[1,"col-xs-3","padMarg","sizeC"],["class","progress col-xs-3 padMarg afu-progress-bar",4,"ngIf"],["class","col-xs-1","role","button",3,"click",4,"ngIf"],[1,"progress","col-xs-3","padMarg","afu-progress-bar"],["role","progressbar",1,"progress-bar","progress-bar-success",3,"ngStyle"],["role","button",1,"col-xs-1",3,"click"],[1,"fa","fa-times"],[1,"row","text-danger","afu-invalid-file"],[1,"col-xs-3"],["class","col-xs-1 delFileIcon","role","button",3,"click",4,"ngIf"],["role","button",1,"col-xs-1","delFileIcon",3,"click"],[1,"progress","col-xs-4","padMarg","afu-progress-bar"],["type","button",1,"btn","btn-success","afu-upload-btn",3,"disabled","click"],["id","attachPin"],[2,"position","relative","padding-left","6px"],[1,"btn","up_btn","afu-attach-pin",3,"click"],["aria-hidden","true",1,"fa","fa-paperclip"],["type","file","title","Select file","name","files[]",2,"display","none",3,"id","accept","change"],[1,"label","label-info",3,"id"]],template:function(t,n){1&t&&(e.YNc(0,v,15,13,"div",0),e.YNc(1,M,10,6,"div",1)),2&t&&(e.Q6J("ngIf","attachPin"!==n.theme),e.xp6(1),e.Q6J("ngIf","attachPin"==n.theme))},directives:[s.O5,s.mk,s.sg,s.PC],styles:[".constraints-info[_ngcontent-%COMP%]{font-style:italic;margin-top:10px}.padMarg[_ngcontent-%COMP%]{margin-bottom:0;padding:0}.caption[_ngcontent-%COMP%]{margin-right:5px}.textOverflow[_ngcontent-%COMP%]{overflow:hidden;padding-right:0;text-overflow:ellipsis;white-space:nowrap}.up_btn[_ngcontent-%COMP%]{background-color:transparent;border:2px solid #5c5b5b;border-radius:22px;color:#000}.delFileIcon[_ngcontent-%COMP%]{color:#ce0909;text-decoration:none}.selectBtnDisabled[_ngcontent-%COMP%]{background-color:#ccc;border:1px solid #999;color:#666;cursor:no-drop}.dragNDrop[_ngcontent-%COMP%]   .div1[_ngcontent-%COMP%]{border:2px dashed #5c5b5b;display:border-box;height:6rem;width:20rem}.dragNDrop[_ngcontent-%COMP%]   .div1[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#5c5b5b;font-weight:700;margin-top:1.4em;text-align:center}.dragNDropBtmPad[_ngcontent-%COMP%]{padding-bottom:2rem}@media screen and (max-width:620px){.caption[_ngcontent-%COMP%]{padding:0}}@media screen and (max-width:510px){.sizeC[_ngcontent-%COMP%]{width:25%}}@media screen and (max-width:260px){.caption[_ngcontent-%COMP%], .sizeC[_ngcontent-%COMP%]{font-size:10px}}.resetBtn[_ngcontent-%COMP%]{margin-left:3px}"]}),l})(),B=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[s.ez,d.JF]]}),l})()}}]);