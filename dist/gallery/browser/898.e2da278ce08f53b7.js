"use strict";(self.webpackChunkgallery=self.webpackChunkgallery||[]).push([[898],{898:(j,f,r)=>{r.r(f),r.d(f,{PaintingUpdateModule:()=>E});var m=r(9808),p=r(1695),h=r(5262),T=r(4355),_=r(8591),v=r(3913),U=r(5226),u=r.n(U),i=r(4893),C=r(2313),s=r(2382),x=r(2079);function M(e,l){1&e&&(i.TgZ(0,"small",35),i._uU(1,"Titulo no es valido"),i.qZA())}function b(e,l){1&e&&(i.TgZ(0,"small",35),i._uU(1,"Subtitulo no es valido"),i.qZA())}function P(e,l){1&e&&(i.TgZ(0,"small",35),i._uU(1,"Descripcion vacia"),i.qZA())}function A(e,l){1&e&&(i.TgZ(0,"small",35),i._uU(1,"Dimension no es valido"),i.qZA())}function J(e,l){1&e&&(i.TgZ(0,"small",35),i._uU(1,"Caracteristicas no es valido"),i.qZA())}function S(e,l){1&e&&(i.TgZ(0,"small",35),i._uU(1,"Link no es valido o es requerido"),i.qZA())}function q(e,l){if(1&e){const t=i.EpF();i.TgZ(0,"picture"),i._UZ(1,"img",40),i.TgZ(2,"div",41),i.NdJ("click",function(o){i.CHM(t);const n=i.oxw(2);return n.deleteImg(o,n.index=0)}),i._uU(3,"X"),i.qZA()()}if(2&e){const t=i.oxw(2);i.xp6(1),i.s9C("src",t.paintings.image0url,i.LSH),i.s9C("alt",t.paintings.titulo)}}function y(e,l){if(1&e){const t=i.EpF();i.TgZ(0,"picture"),i._UZ(1,"img",40),i.TgZ(2,"div",41),i.NdJ("click",function(o){i.CHM(t);const n=i.oxw(2);return n.deleteImg(o,n.index=1)}),i._uU(3,"X"),i.qZA()()}if(2&e){const t=i.oxw(2);i.xp6(1),i.s9C("src",t.paintings.image1url,i.LSH),i.s9C("alt",t.paintings.titulo)}}function N(e,l){if(1&e){const t=i.EpF();i.TgZ(0,"picture"),i._UZ(1,"img",40),i.TgZ(2,"div",41),i.NdJ("click",function(o){i.CHM(t);const n=i.oxw(2);return n.deleteImg(o,n.index=2)}),i._uU(3,"X"),i.qZA()()}if(2&e){const t=i.oxw(2);i.xp6(1),i.s9C("src",t.paintings.image2url,i.LSH),i.s9C("alt",t.paintings.titulo)}}function I(e,l){if(1&e){const t=i.EpF();i.TgZ(0,"picture"),i._UZ(1,"img",40),i.TgZ(2,"div",41),i.NdJ("click",function(o){i.CHM(t);const n=i.oxw(2);return n.deleteImg(o,n.index=3)}),i._uU(3,"X"),i.qZA()()}if(2&e){const t=i.oxw(2);i.xp6(1),i.s9C("src",t.paintings.image3url,i.LSH),i.s9C("alt",t.paintings.titulo)}}function Q(e,l){if(1&e){const t=i.EpF();i.TgZ(0,"picture"),i._UZ(1,"img",40),i.TgZ(2,"div",41),i.NdJ("click",function(o){i.CHM(t);const n=i.oxw(2);return n.deleteImg(o,n.index=4)}),i._uU(3,"X"),i.qZA()()}if(2&e){const t=i.oxw(2);i.xp6(1),i.s9C("src",t.paintings.image4url,i.LSH),i.s9C("alt",t.paintings.titulo)}}function w(e,l){if(1&e){const t=i.EpF();i.TgZ(0,"picture"),i._UZ(1,"img",40),i.TgZ(2,"div",41),i.NdJ("click",function(o){i.CHM(t);const n=i.oxw(2);return n.deleteImg(o,n.index=5)}),i._uU(3,"X"),i.qZA()()}if(2&e){const t=i.oxw(2);i.xp6(1),i.s9C("src",t.paintings.image5url,i.LSH),i.s9C("alt",t.paintings.titulo)}}function k(e,l){if(1&e&&(i.TgZ(0,"div",36)(1,"label",37),i._uU(2,"Imagen subida:"),i.qZA(),i.TgZ(3,"div",38),i.YNc(4,q,4,2,"picture",39),i.YNc(5,y,4,2,"picture",39),i.YNc(6,N,4,2,"picture",39),i.YNc(7,I,4,2,"picture",39),i.YNc(8,Q,4,2,"picture",39),i.YNc(9,w,4,2,"picture",39),i.qZA()()),2&e){const t=i.oxw();i.xp6(4),i.Q6J("ngIf",t.paintings.image0url),i.xp6(1),i.Q6J("ngIf",t.paintings.image1url),i.xp6(1),i.Q6J("ngIf",t.paintings.image2url),i.xp6(1),i.Q6J("ngIf",t.paintings.image3url),i.xp6(1),i.Q6J("ngIf",t.paintings.image4url),i.xp6(1),i.Q6J("ngIf",t.paintings.image5url)}}const Y=function(e){return{"router-animation":e}},B=[{path:"",component:(()=>{class e{constructor(t,a,o,n,g){this._paintingsService=t,this._route=a,this._router=o,this.titleService=n,this.metaService=g,this.animation=!1,this.afuConfig={multiple:!0,formatsAllowed:".jpg,.png,.gif,.jpeg,.webp",maxSize:"20",uploadAPI:{url:v.x.url+"create",method:"POST"},theme:"attachPin",hideProgressBar:!0,hideResetBtn:!0,hideSelectBtn:!1,fileNameIndex:!0,replaceTexts:{selectFileBtn:"Elegi el archivo",resetBtn:"Resetear",uploadBtn:"Subir",dragNDropBox:"Agarra y dejalo",attachPinBtn:"Sube la imagen de la pintura..",afterUploadMsg_success:"Subido exitosamente",afterUploadMsg_error:"Algo fallo",sizeLimit:"Limite de tama\xf1o"}},this.paintings=new T.r("","","","","","","","","","","","","","",null),this.title="Editar pintura",this.subtitle="Puede editar los datos",this.is_update=!0,this.url=v.x.url,this.titleService.setTitle("Actualizar los datos de la pintura"),this.metaService.addTag({name:"robots",content:"noindex, nofollow"})}ngOnInit(){window.scroll({top:0,left:0,behavior:"smooth"}),this.getPintura(),this.animation=!0}onSubmit(){this.suscripcion=this._paintingsService.update(this.paintings._id,this.paintings).subscribe({next:t=>{"Success"==t.status?(this.status="Success",this.paintings[0]=t.paints,u().fire("Se ha editado correctamente","Felicidades, todo un exito","success"),this._router.navigate(["/painting/view/"+this.paintings._id])):(this.status="Error",u().fire("Ha ocurrido un error al editar la pintura","Sera redireccionado a la misma pagina para volver intentar editarlo, de todas maneras sugiero que se fije si se edito correctamente","warning"),this._router.navigate(["/admin/update/"+this.paintings._id]))}})}imageUpload(t){this.paintings.image0url=t.body.image0url,this.paintings.image1url=t.body.image1url,this.paintings.image2url=t.body.image2url,this.paintings.image3url=t.body.image3url,this.paintings.image4url=t.body.image4url,this.paintings.image5url=t.body.image5url}deleteImg(t,a){this.index=a,u().fire({title:"\xbf Estas seguro que quieres eliminar esta imagen ?",text:"No vas a poder recuperarla",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, quiero eliminarla",cancelButtonText:"Cancelar"}).then(o=>{o.isConfirmed?(this._paintingsService.deleteImg(this.paintings,this.index).subscribe({next:n=>{"Success"==n.status&&"Success"==n.status&&(n.paints.image0url&&(this.paintings.image0url=n.paints.image0url),n.paints.image1url&&(this.paintings.image1url=n.paints.image1url),n.paints.image2url&&(this.paintings.image2url=n.paints.image2url),n.paints.image3url&&(this.paintings.image3url=n.paints.image3url),n.paints.image4url&&(this.paintings.image4url=n.paints.image4url),n.paints.image5url&&(this.paintings.image5url=n.paints.image5url))}}),u().fire("Tu imagen se ha eliminado"),setTimeout(()=>{window.location.reload()},1e3)):u().fire("Tu imagen se ha salvado y no se ha eliminado")})}getPintura(){this.suscripcion2=this._route.params.subscribe(t=>{this.suscripcion3=this._route.data.subscribe(a=>{a.painting.paints&&(this.paintings=a.painting.paints)})})}ngOnDestroy(){[this.suscripcion,this.suscripcion2,this.suscripcion3].forEach(t=>null==t?void 0:t.unsubscribe()),this.animation=!1}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(_.Q),i.Y36(p.gz),i.Y36(p.F0),i.Y36(C.Dx),i.Y36(C.h_))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-painting-update"]],features:[i._Bn([_.Q])],decls:56,vars:20,consts:[[1,"update",3,"ngClass"],[1,"adminupdatesection"],[1,"container"],[1,"row","justify-content-center"],[1,"c-col","col-12","col-sm-12","col-md-10","col-lg-8","enquiryform"],[1,"center","contactcolor"],[1,"center","contactcolor","infocontact"],[3,"ngSubmit"],["paintingUpdateForm","ngForm"],[1,"form-group"],["for","Titulo",1,"formlabel"],["type","text","id","Titulo","placeholder","Titulo","maxlength","160","name","titulo","required","",1,"form-control",3,"ngModel","ngModelChange"],["titulo","ngModel"],["style","color: rgb(201, 201, 201)",4,"ngIf"],["for","Subtitulo",1,"formlabel"],["type","text","id","Subtitulo","placeholder","Subtitulo","maxlength","160","name","subtitulo","required","",1,"form-control",3,"ngModel","ngModelChange"],["subtitulo","ngModel"],["for","Descripcion",1,"formlabel"],["id","Descripcion","rows","10","name","descripcion","placeholder","Descripcion","required","",1,"form-control",3,"ngModel","ngModelChange"],["descripcion","ngModel"],["for","Dimension",1,"formlabel"],["type","text","id","Dimension","placeholder","Dimension","name","dimension","required","",1,"form-control",3,"ngModel","ngModelChange"],["dimension","ngModel"],["for","Caracteristicas",1,"formlabel"],["type","text","id","Caracteristicas","placeholder","Caracteristicas","name","characteristics","required","",1,"form-control",3,"ngModel","ngModelChange"],["characteristics","ngModel"],["for","Link",1,"formlabel"],["type","text","id","Link","placeholder","link","name","link","required","",1,"form-control",3,"ngModel","ngModelChange"],["link","ngModel"],["for","Link2",1,"formlabel"],["type","text","id","Link2","placeholder","Segundo link","name","link2",1,"form-control",3,"ngModel","ngModelChange"],["link2","ngModel"],["style","margin-bottom: 12px",4,"ngIf"],[3,"config","ApiResponse"],["type","submit","value","Submit",1,"btn","btn-light","btncustomcontact","boxshadow"],[2,"color","rgb(201, 201, 201)"],[2,"margin-bottom","12px"],["for","Image",1,"formlabel"],[1,"room-preview"],[4,"ngIf"],[1,"room-active",3,"src","alt"],[3,"click"]],template:function(t,a){if(1&t&&(i.TgZ(0,"main",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),i._uU(6),i.qZA(),i.TgZ(7,"h3",6),i._uU(8),i.qZA(),i.TgZ(9,"form",7,8),i.NdJ("ngSubmit",function(){return a.onSubmit()}),i.TgZ(11,"div",9)(12,"label",10),i._uU(13,"Titulo"),i.qZA(),i.TgZ(14,"input",11,12),i.NdJ("ngModelChange",function(n){return a.paintings.titulo=n}),i.qZA(),i.YNc(16,M,2,0,"small",13),i.qZA(),i.TgZ(17,"div",9)(18,"label",14),i._uU(19,"Subtitulo"),i.qZA(),i.TgZ(20,"input",15,16),i.NdJ("ngModelChange",function(n){return a.paintings.subtitulo=n}),i.qZA(),i.YNc(22,b,2,0,"small",13),i.qZA(),i.TgZ(23,"div",9)(24,"label",17),i._uU(25,"Descripcion"),i.qZA(),i.TgZ(26,"textarea",18,19),i.NdJ("ngModelChange",function(n){return a.paintings.descripcion=n}),i.qZA(),i.YNc(28,P,2,0,"small",13),i.qZA(),i.TgZ(29,"div",9)(30,"label",20),i._uU(31,"Dimension"),i.qZA(),i.TgZ(32,"input",21,22),i.NdJ("ngModelChange",function(n){return a.paintings.dimension=n}),i.qZA(),i.YNc(34,A,2,0,"small",13),i.qZA(),i.TgZ(35,"div",9)(36,"label",23),i._uU(37,"Caracteristicas"),i.qZA(),i.TgZ(38,"input",24,25),i.NdJ("ngModelChange",function(n){return a.paintings.characteristics=n}),i.qZA(),i.YNc(40,J,2,0,"small",13),i.qZA(),i.TgZ(41,"div",9)(42,"label",26),i._uU(43,"Link"),i.qZA(),i.TgZ(44,"input",27,28),i.NdJ("ngModelChange",function(n){return a.paintings.link=n}),i.qZA(),i.YNc(46,S,2,0,"small",13),i.qZA(),i.TgZ(47,"div",9)(48,"label",29),i._uU(49,"Segundo link"),i.qZA(),i.TgZ(50,"input",30,31),i.NdJ("ngModelChange",function(n){return a.paintings.link2=n}),i.qZA()(),i.TgZ(52,"div",9),i.YNc(53,k,10,6,"div",32),i.qZA(),i.TgZ(54,"angular-file-uploader",33),i.NdJ("ApiResponse",function(n){return a.imageUpload(n)}),i.qZA(),i._UZ(55,"input",34),i.qZA()()()()()()),2&t){const o=i.MAs(15),n=i.MAs(21),g=i.MAs(27),c=i.MAs(33),d=i.MAs(39),Z=i.MAs(45);i.Q6J("ngClass",i.VKq(18,Y,!0===a.animation)),i.xp6(6),i.Oqu(a.title),i.xp6(2),i.Oqu(a.subtitle),i.xp6(6),i.Q6J("ngModel",a.paintings.titulo),i.xp6(2),i.Q6J("ngIf",!o.valid&&o.touched),i.xp6(4),i.Q6J("ngModel",a.paintings.subtitulo),i.xp6(2),i.Q6J("ngIf",!n.valid&&n.touched),i.xp6(4),i.Q6J("ngModel",a.paintings.descripcion),i.xp6(2),i.Q6J("ngIf",!g.valid&&g.touched),i.xp6(4),i.Q6J("ngModel",a.paintings.dimension),i.xp6(2),i.Q6J("ngIf",!c.valid&&c.touched),i.xp6(4),i.Q6J("ngModel",a.paintings.characteristics),i.xp6(2),i.Q6J("ngIf",!d.valid&&d.touched),i.xp6(4),i.Q6J("ngModel",a.paintings.link),i.xp6(2),i.Q6J("ngIf",!Z.valid&&Z.touched),i.xp6(4),i.Q6J("ngModel",a.paintings.link2),i.xp6(3),i.Q6J("ngIf",a.is_update),i.xp6(1),i.Q6J("config",a.afuConfig)}},directives:[m.mk,s._Y,s.JL,s.F,s.Fj,s.nD,s.Q7,s.JJ,s.On,m.O5,x.Q],styles:["picture[_ngcontent-%COMP%]{display:block;position:relative}picture[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:2;color:#fff;background:#7c1d1d;padding:16px}picture[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{position:absolute;top:0;left:0;z-index:2;color:#fff;background:#c32727;padding:16px}.room-active[_ngcontent-%COMP%]{width:140px}.contenedor_imagenes[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.subida[_ngcontent-%COMP%]{width:130px;height:130px;border:1px solid white;display:flex;align-items:center;justify-content:center;margin-right:10px}.subida[_ngcontent-%COMP%]:hover{cursor:pointer}input[type=file][_ngcontent-%COMP%]{display:none}"]}),e})(),resolve:{painting:h.V}}];let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[h.V],imports:[[p.Bz.forChild(B)],p.Bz]}),e})();var O=r(520),L=r(7556),D=r(2993),H=r(455);let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[L.e,D.a,{provide:O.TP,useClass:H.N,multi:!0},_.Q],imports:[[m.ez,F,s.u5,x.F]]}),e})()}}]);