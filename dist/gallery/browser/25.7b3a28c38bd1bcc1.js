"use strict";(self.webpackChunkgallery=self.webpackChunkgallery||[]).push([[25],{25:(U,c,i)=>{i.r(c),i.d(c,{PortadaModule:()=>B});var d=i(9808),u=i(1695);class P{constructor(n,a,e,r){this._id=n,this.titulo=a,this.image0url=e,this.date=r}}var m=i(4283),p=i(3913),T=i(5226),g=i.n(T),t=i(4893),h=i(2313),s=i(2382),f=i(2079);function b(o,n){1&o&&(t.TgZ(0,"small",17),t._uU(1,"Titulo no es valido"),t.qZA())}function S(o,n){if(1&o&&t._UZ(0,"img",22),2&o){const a=t.oxw(2);t.s9C("src",a.portrait.image0url,t.LSH),t.s9C("alt",a.portrait.titulo)}}function C(o,n){if(1&o&&(t.TgZ(0,"div",18)(1,"label",19),t._uU(2,"Imagen subida:"),t.qZA(),t.TgZ(3,"div",20),t.YNc(4,S,1,2,"img",21),t.qZA()()),2&o){const a=t.oxw();t.xp6(4),t.Q6J("ngIf",a.portrait.image0url)}}const x=function(o){return{"router-animation":o}},Z=[{path:"",component:(()=>{class o{constructor(a,e,r,l,I){this._portraitService=a,this._route=e,this._router=r,this.titleService=l,this.metaService=I,this.animation=!1,this.afuConfig={multiple:!0,formatsAllowed:".jpg,.png,.gif,.jpeg,.webp",maxSize:"50",uploadAPI:{url:p.x.url+"portrait/upload",method:"POST"},theme:"attachPin",hideProgressBar:!0,hideResetBtn:!0,hideSelectBtn:!1,fileNameIndex:!0,replaceTexts:{selectFileBtn:"Elegi el archivo",resetBtn:"Resetear",uploadBtn:"Subir",dragNDropBox:"Agarra y dejalo",attachPinBtn:"Sube imagen de portada..",afterUploadMsg_success:"Subido exitosamente",afterUploadMsg_error:"Algo fallo",sizeLimit:"Limite de tama\xf1o"}},this.portrait=new P("","","",null),this.title="Editar portada",this.subtitle="Puede editar los datos",this.is_update=!0,this.url=p.x.url,this.titleService.setTitle("Cambiar portada"),this.metaService.addTag({name:"robots",content:"noindex, nofollow"})}ngOnInit(){window.scroll({top:0,left:0,behavior:"smooth"}),this.getPortrait(),this.animation=!0}onSubmit(){this.suscripcion=this._portraitService.updatePortrait(this.portrait._id,this.portrait).subscribe({next:a=>{"Success"==a.status?(this.status="Success",this.portrait[0]=a.portrait,g().fire("Se ha editado correctamente","Felicidades, todo un exito","success"),setTimeout(()=>{this._router.navigate(["/admin"]).then(()=>{window.location.reload()})},2e3)):(this.status="Error",g().fire("Ha ocurrido un error al editar la portada","Sera redireccionado a la misma pagina para volver intentar editarlo, de todas maneras sugiero que se fije si se edito correctamente","warning"),setTimeout(()=>{this._router.navigate(["/admin/change/portada/"+this.portrait._id])},2e3))}})}imageUpload(a){this.portrait.image0url=a.body.image0url}getPortrait(){this.suscripcion2=this._route.params.subscribe(a=>{this.suscripcion3=this._portraitService.getPortrait(a.id).subscribe({next:r=>{r.portrait&&(this.portrait=r.portrait)}})})}ngOnDestroy(){[this.suscripcion,this.suscripcion2,this.suscripcion3].forEach(a=>null==a?void 0:a.unsubscribe()),this.animation=!1}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(m.L),t.Y36(u.gz),t.Y36(u.F0),t.Y36(h.Dx),t.Y36(h.h_))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-portada"]],features:[t._Bn([m.L])],decls:21,vars:9,consts:[[1,"portadaupdate",3,"ngClass"],[1,"portadaupdatesection"],[1,"container"],[1,"row","justify-content-center"],[1,"c-col","col-12","col-sm-12","col-md-10","col-lg-8","enquiryform"],[1,"center","contactcolor"],[1,"center","contactcolor","infocontact"],[3,"ngSubmit"],["portraitUpdateForm","ngForm"],[1,"form-group"],["for","Titulo",1,"formlabel"],["type","text","id","Titulo","placeholder","Titulo","maxlength","160","name","titulo","required","",1,"form-control",3,"ngModel","ngModelChange"],["titulo","ngModel"],["style","color: rgb(201, 201, 201)",4,"ngIf"],["style","margin-bottom: 12px",4,"ngIf"],[3,"config","ApiResponse"],["type","submit","value","Submit",1,"btn","btn-light","btncustomcontact","boxshadow"],[2,"color","rgb(201, 201, 201)"],[2,"margin-bottom","12px"],["for","Image",1,"formlabel"],[1,"room-preview"],["class","room-active",3,"src","alt",4,"ngIf"],[1,"room-active",3,"src","alt"]],template:function(a,e){if(1&a&&(t.TgZ(0,"main",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),t._uU(6),t.qZA(),t.TgZ(7,"h3",6),t._uU(8),t.qZA(),t.TgZ(9,"form",7,8),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(11,"div",9)(12,"label",10),t._uU(13,"Titulo"),t.qZA(),t.TgZ(14,"input",11,12),t.NdJ("ngModelChange",function(l){return e.portrait.titulo=l}),t.qZA(),t.YNc(16,b,2,0,"small",13),t.qZA(),t.TgZ(17,"div",9),t.YNc(18,C,5,1,"div",14),t.TgZ(19,"angular-file-uploader",15),t.NdJ("ApiResponse",function(l){return e.imageUpload(l)}),t.qZA()(),t._UZ(20,"input",16),t.qZA()()()()()()),2&a){const r=t.MAs(15);t.Q6J("ngClass",t.VKq(7,x,!0===e.animation)),t.xp6(6),t.Oqu(e.title),t.xp6(2),t.Oqu(e.subtitle),t.xp6(6),t.Q6J("ngModel",e.portrait.titulo),t.xp6(2),t.Q6J("ngIf",!r.valid&&r.touched),t.xp6(2),t.Q6J("ngIf",e.is_update),t.xp6(1),t.Q6J("config",e.afuConfig)}},directives:[d.mk,s._Y,s.JL,s.F,s.Fj,s.nD,s.Q7,s.JJ,s.On,d.O5,f.Q],styles:[""]}),o})()}];let v=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.Bz.forChild(Z)],u.Bz]}),o})();var A=i(7556),y=i(2993),M=i(520),J=i(455);let B=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[A.e,y.a,v,{provide:M.TP,useClass:J.N,multi:!0}],imports:[[d.ez,v,s.u5,f.F]]}),o})()}}]);