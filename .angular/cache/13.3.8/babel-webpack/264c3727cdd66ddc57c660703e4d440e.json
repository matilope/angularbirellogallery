{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { PaintingsService } from '../../services/paintings.service';\nimport { PortraitService } from '../../services/portrait.service';\nimport { InstagramService } from '../../services/instagram.service';\nimport { Global } from '../../services/global';\nimport swal from 'sweetalert2';\nlet AdminComponent = class AdminComponent {\n  constructor(_paintingsService, _portraitService, _instagramService, _route, _router, titleService, metaService, activatedRoute) {\n    this._paintingsService = _paintingsService;\n    this._portraitService = _portraitService;\n    this._instagramService = _instagramService;\n    this._route = _route;\n    this._router = _router;\n    this.titleService = titleService;\n    this.metaService = metaService;\n    this.activatedRoute = activatedRoute;\n    this.principal = \"Panel de admin\";\n    this.subtitulo = \"Vas a poder crear, editar y eliminar tus pinturas\";\n    this.url = Global.url;\n    titleService.setTitle(\"Admin | Birello Gallery\");\n    this.metaService.addTag({\n      name: 'robots',\n      content: 'noindex, nofollow'\n    });\n  }\n\n  ngOnInit() {\n    window.scroll({\n      top: 0,\n      left: 0,\n      behavior: 'smooth'\n    });\n    this.suscripcion = this.activatedRoute.data.subscribe({\n      next: response => {\n        if (response.paintings.paints) {\n          this.paintings = response.paintings.paints;\n        }\n      }\n    });\n    this.suscripcion2 = this._portraitService.getPortraits().subscribe({\n      next: response => {\n        if (response.portrait) {\n          this.portrait = response.portrait;\n        }\n      }\n    });\n    this.suscripcion3 = this._instagramService.getTokens().subscribe({\n      next: response => {\n        if (response.token) {\n          this.token = response.token;\n        }\n      }\n    });\n  }\n\n  delete(id) {\n    swal.fire({\n      title: 'Â¿ Estas seguro que quieres eliminar esta pintura ?',\n      text: \"No vas a poder recuperarla\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Si, quiero eliminarla',\n      cancelButtonText: \"Cancelar\"\n    }).then(result => {\n      if (result.isConfirmed) {\n        this._paintingsService.delete(id).subscribe({\n          next: () => {\n            swal.fire('Eliminada', 'La pintura se ha eliminado correctamente', 'success');\n            setTimeout(() => {\n              this._router.navigate(['/admin']).then(() => {\n                window.location.reload();\n              });\n            }, 2000);\n          },\n          error: () => {\n            swal.fire('Error', 'La pintura no se ha eliminado correctamente', 'error');\n            setTimeout(() => {\n              this._router.navigate(['/admin']).then(() => {\n                window.location.reload();\n              });\n            }, 2000);\n          }\n        });\n      } else {\n        swal.fire(\"Tu pintura se ha salvado y no se ha eliminado\");\n        setTimeout(() => {\n          this._router.navigate(['/admin']).then(() => {\n            window.location.reload();\n          });\n        }, 2000);\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    [this.suscripcion, this.suscripcion2, this.suscripcion3].forEach(e => e === null || e === void 0 ? void 0 : e.unsubscribe());\n  }\n\n};\nAdminComponent = __decorate([Component({\n  selector: 'app-admin',\n  templateUrl: './admin.component.html',\n  styleUrls: ['./admin.component.css'],\n  providers: [PaintingsService, PortraitService, InstagramService]\n})], AdminComponent);\nexport { AdminComponent };","map":null,"metadata":{},"sourceType":"module"}