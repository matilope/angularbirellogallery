{"ast":null,"code":"import { AdminService } from '../../services/admin.service';\nimport { Global } from '../../services/global';\nimport swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/admin.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/platform-browser\";\nimport * as i4 from \"@angular/common\";\n\nconst _c0 = function (a0) {\n  return {\n    \"router-animation\": a0\n  };\n};\n\nfunction AdminusersComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"div\", 9)(3, \"table\", 10)(4, \"thead\")(5, \"tr\")(6, \"th\", 11);\n    i0.ɵɵtext(7, \"#\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 11);\n    i0.ɵɵtext(9, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 11);\n    i0.ɵɵtext(11, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 11);\n    i0.ɵɵtext(13, \"data\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\")(15, \"tr\")(16, \"th\", 12);\n    i0.ɵɵtext(17, \"1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"td\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"td\");\n    i0.ɵɵtext(21, \"**Private**\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"td\");\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(24, \"a\", 13);\n    i0.ɵɵlistener(\"click\", function AdminusersComponent_div_3_Template_a_click_24_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const users_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.deleteUser(users_r1._id);\n    });\n    i0.ɵɵtext(25, \"Borrar usuario\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const users_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r0.animation === true));\n    i0.ɵɵadvance(19);\n    i0.ɵɵtextInterpolate(users_r1.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(users_r1.token);\n  }\n}\n\nexport let AdminusersComponent = /*#__PURE__*/(() => {\n  class AdminusersComponent {\n    constructor(_adminService, _route, _router, metaService) {\n      this._adminService = _adminService;\n      this._route = _route;\n      this._router = _router;\n      this.metaService = metaService;\n      this.animation = false;\n      this.url = Global.url;\n      this.metaService.addTag({\n        name: 'robots',\n        content: 'noindex, nofollow'\n      });\n    }\n\n    ngOnInit() {\n      window.scroll({\n        top: 0,\n        left: 0,\n        behavior: 'smooth'\n      });\n      this.suscripcion = this._adminService.getUsers().subscribe({\n        next: response => {\n          if (response.users) {\n            this.animation = true;\n            this.admins = response.users;\n          }\n        }\n      });\n    }\n\n    deleteUser(id) {\n      swal.fire({\n        title: '¿ Estas seguro que quieres eliminar este usuario ?',\n        text: 'No vas a poder recuperarlo',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Si, quiero eliminarlo',\n        cancelButtonText: 'Cancelar'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.suscripciondelete = this._adminService.deleteUser(id).subscribe({\n            next: () => {\n              // localStorage.setItem(\"token_birello_gallery_admin\", null);\n              swal.fire('Eliminado', 'El usuario ha sido eliminado correctamente', 'success');\n              setTimeout(() => {\n                this._router.navigate(['/admin/show/users']).then(() => {\n                  window.location.reload();\n                });\n              }, 2000);\n            },\n            error: () => {\n              swal.fire('Error', 'El usuario no se ha eliminado correctamente', 'error');\n              setTimeout(() => {\n                this._router.navigate(['/admin']).then(() => {\n                  window.location.reload();\n                });\n              }, 2000);\n            }\n          });\n        } else {\n          swal.fire('El usuario se ha salvado y no se ha eliminado');\n          setTimeout(() => {\n            this._router.navigate(['/admin']).then(() => {\n              window.location.reload();\n            });\n          }, 2000);\n        }\n      });\n    }\n\n    ngOnDestroy() {\n      [this.suscripcion, this.suscripciondelete].forEach(e => e === null || e === void 0 ? void 0 : e.unsubscribe());\n      this.animation = false;\n    }\n\n  }\n\n  AdminusersComponent.ɵfac = function AdminusersComponent_Factory(t) {\n    return new (t || AdminusersComponent)(i0.ɵɵdirectiveInject(i1.AdminService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.Meta));\n  };\n\n  AdminusersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AdminusersComponent,\n    selectors: [[\"app-adminusers\"]],\n    features: [i0.ɵɵProvidersFeature([AdminService])],\n    decls: 8,\n    vars: 1,\n    consts: [[1, \"adminregisters\", 2, \"margin-top\", \"20px\"], [1, \"adminregister\"], [1, \"container\"], [\"class\", \"row rowresponsiveapi justify-content-center\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\"], [1, \"col\"], [\"routerLink\", \"/admin\", 2, \"color\", \"white\", \"display\", \"block\", \"margin\", \"0 auto\", \"margin-bottom\", \"16px\"], [1, \"row\", \"rowresponsiveapi\", \"justify-content-center\", 3, \"ngClass\"], [1, \"c-col\", \"col-12\", \"col-sm-10\", \"col-md-8\", \"col-lg-6\", \"marginresponsiveindex\"], [1, \"table-responsive\"], [1, \"table\", \"table-dark\"], [\"scope\", \"col\"], [\"scope\", \"row\"], [1, \"btn\", \"deleteuser\", 3, \"click\"]],\n    template: function AdminusersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"main\", 0)(1, \"section\", 1)(2, \"div\", 2);\n        i0.ɵɵtemplate(3, AdminusersComponent_div_3_Template, 26, 5, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"a\", 6);\n        i0.ɵɵtext(7, \"Go back to the admin page\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.admins);\n      }\n    },\n    directives: [i4.NgForOf, i4.NgClass, i2.RouterLinkWithHref],\n    styles: [\"\"]\n  });\n  return AdminusersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}