{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ElementRef, Input, ViewChildren } from '@angular/core';\nimport { Global } from '../../services/global';\nimport { PaintingsService } from 'src/app/services/paintings.service';\nlet HomeComponent = class HomeComponent {\n  constructor(titleService, metaService, activatedRoute, paintingService, spinner) {\n    this.titleService = titleService;\n    this.metaService = metaService;\n    this.activatedRoute = activatedRoute;\n    this.paintingService = paintingService;\n    this.spinner = spinner;\n    this.animation = false;\n    this.currentPage = 1;\n    this.principal = \"Artworks\";\n    this.subtitulo = \"Buying art is buying time of the artist's life.\";\n    this.url = Global.url;\n    this.metaService.updateTag({\n      property: 'og:title',\n      content: 'Birello Gallery | Artworks'\n    });\n    this.metaService.updateTag({\n      property: 'og:description',\n      content: this.subtitulo\n    });\n    this.metaService.updateTag({\n      name: 'keywords',\n      content: 'Buying art, investments, art investments, gallery, birello, birello gallery'\n    });\n    this.metaService.updateTag({\n      property: 'twitter:title',\n      content: 'Birello Gallery | Artworks'\n    });\n    this.metaService.updateTag({\n      property: 'twitter:description',\n      content: this.subtitulo\n    });\n  }\n\n  ngOnInit() {\n    window.scroll({\n      top: 0,\n      left: 0,\n      behavior: 'smooth'\n    });\n    window.addEventListener(\"scroll\", function () {\n      let card = document.querySelectorAll(\".card\");\n\n      for (let i = 6; i < card.length; i++) {\n        let position = card[i].getBoundingClientRect().top;\n        let screen = window.innerHeight;\n\n        if (position < screen) {\n          card[i].classList.add(\"animacion\");\n        } else {\n          card[i].classList.remove(\"animacion\");\n        }\n      }\n    });\n    this.spinner.show();\n    this.suscripcion = this.paintingService.getPaintingsPagination(this.currentPage).subscribe({\n      next: response => {\n        this.spinner.hide();\n        this.paintings = response.paints;\n        this.totalPages = response.results.total;\n      }\n    });\n    this.intersectionObserver();\n  }\n\n  ngAfterViewInit() {\n    this.theLastList.changes.subscribe({\n      next: response => {\n        if (response.last) {\n          this.observer.observe(response.last.nativeElement);\n        }\n      }\n    });\n  }\n\n  paintingsData() {\n    this.spinner.show();\n    this.suscripcion = this.paintingService.getPaintingsPagination(this.currentPage).subscribe({\n      next: response => {\n        this.spinner.hide();\n        response.paints.forEach(e => {\n          this.paintings.push(e);\n        });\n        this.totalPages = response.results.total;\n      }\n    });\n  }\n\n  intersectionObserver() {\n    let options = {\n      root: null,\n      rootMargin: '0px',\n      threshold: 0.5\n    };\n    this.observer = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting) {\n        if (this.currentPage < this.totalPages) {\n          this.currentPage++;\n          this.paintingsData();\n        }\n      }\n    }, options);\n  }\n\n  ngOnDestroy() {\n    var _a;\n\n    (_a = this.suscripcion) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n    this.animation = false;\n  }\n\n};\n\n__decorate([Input()], HomeComponent.prototype, \"animation\", void 0);\n\n__decorate([ViewChildren('theLastList', {\n  read: ElementRef\n})], HomeComponent.prototype, \"theLastList\", void 0);\n\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css'],\n  providers: [PaintingsService]\n})], HomeComponent);\nexport { HomeComponent };","map":null,"metadata":{},"sourceType":"module"}